define(["./GeometryOffsetAttribute-03006e80","./Transforms-475655a6","./Cartesian2-08065eec","./ComponentDatatype-a867ddaa","./CylinderGeometryLibrary-913928ca","./when-ad3237a0","./Check-be2d5acb","./GeometryAttribute-9b226476","./GeometryAttributes-27dc652d","./IndexDatatype-9504f550","./Math-5ca9b250","./VertexFormat-fc4fc84a","./combine-1510933d","./RuntimeError-767bd866","./WebGLConstants-1c8239cc"],function(T,L,M,O,t,P,e,k,E,z,I,d,a,n,r){"use strict";var N=new M.Cartesian2,U=new M.Cartesian3,B=new M.Cartesian3,S=new M.Cartesian3;function c(t){var e=(t=P.defaultValue(t,P.defaultValue.EMPTY_OBJECT)).length,a=t.topRadius,n=t.bottomRadius,r=P.defaultValue(t.vertexFormat,d.VertexFormat.DEFAULT),o=P.defaultValue(t.slices,128);this._startRadian=P.defaultValue(t.startRadian,0),this._endRadian=P.defaultValue(t.endRadian,2*Math.PI),this._length=e,this._topRadius=a,this._bottomRadius=n,this._vertexFormat=d.VertexFormat.clone(r),this._slices=o,this._offsetAttribute=t.offsetAttribute,this._workerName="createCirclePipeGeometry"}new M.Cartesian3,c.packedLength=d.VertexFormat.packedLength+7,c.pack=function(t,e,a){return a=P.defaultValue(a,0),d.VertexFormat.pack(t._vertexFormat,e,a),a+=d.VertexFormat.packedLength,e[a++]=t._length,e[a++]=t._topRadius,e[a++]=t._bottomRadius,e[a++]=t._slices,e[a++]=t._startRadian,e[a++]=t._endRadian,e[a]=P.defaultValue(t._offsetAttribute,-1),e};var p=new d.VertexFormat,l={vertexFormat:p,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};return c.unpack=function(t,e,a){e=P.defaultValue(e,0);var n=d.VertexFormat.unpack(t,e,p);e+=d.VertexFormat.packedLength;var r=t[e++],o=t[e++],i=t[e++],s=t[e++],u=t[e++],m=t[e++],e=t[e];return P.defined(a)?(a._vertexFormat=d.VertexFormat.clone(n,a._vertexFormat),a._length=r,a._topRadius=o,a._bottomRadius=i,a._slices=s,a._offsetAttribute=-1===e?void 0:e,a):(l.length=r,l.topRadius=o,l.bottomRadius=i,l.slices=s,l.startRadian=u,l.endRadian=m,l.offsetAttribute=-1===e?void 0:e,new c(l))},c.createGeometry=function(t){var e=t._length,a=t._topRadius,n=t._bottomRadius,r=t._vertexFormat,o=t._slices,i=t._startRadian,s=t._endRadian,u=!1;if(0==i&&s==I.CesiumMath.TWO_PI&&(u=!0),!(e<=0||a<0||n<0||0===a&&0===n)){var m=o+o,s=function(t,e,a,n,r,o,i,s){for(var u=.5*t,m=-u,d=new Float64Array(3*(n+n)),c=0,p=s?n-1:n,l=(i-o)/(p-1),f=0;f<p;f++){var y=o+f*l,b=Math.cos(y),v=Math.sin(y),A=v*a,y=b*e,v=v*e;r&&(d[c++]=b*a,d[c++]=A,d[c++]=m,d[c++]=y,d[c++]=v,d[c++]=u)}return s&&(d[c++]=d[0],d[c++]=d[1],d[c++]=d[2],d[c++]=d[3],d[c++]=d[4],d[c++]=d[5]),d}(e,a,n,o,!0,i,s,u),d=r.st?new Float32Array(2*m):void 0,c=r.normal?new Float32Array(3*m):void 0,p=r.tangent?new Float32Array(3*m):void 0,l=r.bitangent?new Float32Array(3*m):void 0,f=r.normal||r.tangent||r.bitangent;if(f){var y=r.tangent||r.bitangent,b=0,v=0,A=0,u=Math.atan2(n-a,e),_=U;_.z=Math.sin(u);for(var h=Math.cos(u),g=S,x=B,F=0;F<o;F++){var C=F/o*I.CesiumMath.TWO_PI,R=h*Math.cos(C),C=h*Math.sin(C);f&&(_.x=R,_.y=C,y&&(g=M.Cartesian3.normalize(M.Cartesian3.cross(M.Cartesian3.UNIT_Z,_,g),g)),r.normal&&(c[b++]=_.x,c[b++]=_.y,c[b++]=_.z,c[b++]=_.x,c[b++]=_.y,c[b++]=_.z),r.tangent&&(p[v++]=g.x,p[v++]=g.y,p[v++]=g.z,p[v++]=g.x,p[v++]=g.y,p[v++]=g.z),r.bitangent&&(x=M.Cartesian3.normalize(M.Cartesian3.cross(_,g,x),x),l[A++]=x.x,l[A++]=x.y,l[A++]=x.z,l[A++]=x.x,l[A++]=x.y,l[A++]=x.z))}for(F=0;F<o;F++)r.normal&&(c[b++]=0,c[b++]=0,c[b++]=-1),r.tangent&&(p[v++]=1,p[v++]=0,p[v++]=0),r.bitangent&&(l[A++]=0,l[A++]=-1,l[A++]=0);for(F=0;F<o;F++)r.normal&&(c[b++]=0,c[b++]=0,c[b++]=1),r.tangent&&(p[v++]=1,p[v++]=0,p[v++]=0),r.bitangent&&(l[A++]=0,l[A++]=1,l[A++]=0)}var w=z.IndexDatatype.createTypedArray(m,6*o-6),G=0,V=0;for(F=0;F<o-1;F++)w[G++]=V,w[G++]=V+2,w[G++]=V+3,w[G++]=V,w[G++]=V+3,w[G++]=V+1,V+=2;var D=0;if(r.st){for(F=0;F<o-1;F++)d[D++]=F/o,d[D++]=0,d[D++]=F/o,d[D++]=1;d[D++]=1,d[D++]=0,d[D++]=1,d[D++]=1}m=new E.GeometryAttributes;r.position&&(m.position=new k.GeometryAttribute({componentDatatype:O.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:s})),r.normal&&(m.normal=new k.GeometryAttribute({componentDatatype:O.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:c})),r.tangent&&(m.tangent=new k.GeometryAttribute({componentDatatype:O.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:p})),r.bitangent&&(m.bitangent=new k.GeometryAttribute({componentDatatype:O.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:l})),r.st&&(m.st=new k.GeometryAttribute({componentDatatype:O.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:d})),N.x=.5*e,N.y=Math.max(n,a);a=new L.BoundingSphere(M.Cartesian3.ZERO,M.Cartesian2.magnitude(N));return P.defined(t._offsetAttribute)&&(e=s.length,s=new Uint8Array(e/3),e=t._offsetAttribute===T.GeometryOffsetAttribute.NONE?0:1,T.arrayFill(s,e),m.applyOffset=new k.GeometryAttribute({componentDatatype:O.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:s})),new k.Geometry({attributes:m,indices:w,primitiveType:k.PrimitiveType.TRIANGLES,boundingSphere:a,offsetAttribute:t._offsetAttribute})}},function(t,e){return P.defined(e)&&(t=c.unpack(t,e)),c.createGeometry(t)}});
